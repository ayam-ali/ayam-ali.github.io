<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <!-- JQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <!-- animate on scroll -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css"
        integrity="sha512-1cK78a1o+ht2JcaW6g8OXYwqpev9+6GqOkz9xmBN9iUUhIndKtxwILGWYOSibOKjLsEdjyjZvYDq/cZwNeak0w=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- our style sheet -->
    <link rel="stylesheet" type="text/css" href="styles.css">

</head>

<body>

    <header>
        <!-- navbar here -->

        <nav class="navbar navbar-expand-md navbar-expand-lg bg-body-tertiary" ">
            <div class=" nav_bar container-fluid " style=" background: #f7b9ce">
            <a class="logo d-flex align-items-center me-auto me-lg-0" href="index.html">
                <img src="img/cakeme_logo.png" width="60" height="60">
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>


            <div class="collapse navbar-collapse justify-content-center" id="navbarSupportedContent">
                <ul class="navbar-nav">
                    <!-- menu -->
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="Menu" href="index.html#menu_index">Menu</a>
                    </li>

                    <!-- About us -->
                    <li class="nav-item">
                        <a class="nav-link" href="index.html#about_index">About Us</a>
                    </li>

                    <!-- Gallary -->
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="Gallary" href="index.html#gallary_index">Gallary</a>
                    </li>

                    <!-- Order Form -->
                    <li class="nav-item">
                        <a class="nav-link" href="orderform.html">Order Here</a>
                    </li>

                </ul>


            </div>

            </div>
        </nav>
        <!-- navbar end -->

    </header>



    <div class="order container">
        <h1 class="order" data-aos="fade-up">Cake Me Cheesecake</h1>

        <!-- menu info -->
        <div class="order info container" data-aos="fade-up" data-aos-duration="1000">
            <p>
                <i>Order the most delicious cheesecake now! <br>

                    If you have any questions, please contact us.</i> <br><br>
                1 Large (9-inch) cheesecake can feed between 10 - 12 people<br>
            </p>
            <!-- image menu-->
            <img class="order img-fluid" id="order_menu" src="img/order_menu.png">
        </div>


        <div>
            <h2><strong>Order Form</strong></h2>
        </div>
        <form id="order_form_inputs" class="order_form row gy-2 gx-3 align-items-center">
            <!-- name -->
            <div class="form-floating mb-3 col-12">
                <input name="entry.532714139" id="order_fullname" type="text" class="form-control" id="order_fullname"
                    placeholder="" title="Please fill out your name" required>
                <label for="order_fullname" class="form-label">Full name</label>
            </div>
            <!-- phone number -->
            <div class="form-floating mb-3 col-12">
               <input name="entry.260774608" id="order_phone" type="text" class="form-control" title="Please fill out your phone number" required>
                <label for="order_phone" class="form-label">Phone Number</label>
            </div>


            <!-- order date pick up time -->
            <div class="form-floating mb-3 col-12">
                <input name="entry.1511446537" id="order_datetime" type="datetime-local" class="form-control"
                title="Please select prefered order date and time" required>
                <label for="order_date" class="form-label">Please list the Date and Time you would like your
                    cheesecake</label>
            </div>

            <!-- size -->
            <div class=" form mb-3 col-12">
                <select name="entry.150430871" id="order_size"
                    class="form-control form-select order_form_dropdown form-select-md mb-3 " size=""
                    aria-label="size select" title="Please select your size" required>
                    <option selected value="">Select Size</option>
                    <option value="Slice">Slice ~ $6.49</option>
                    <option value="Large">Large ~ $44.49</option>
                    <option value="Multiple">Multiple Orders ( 2 or more )</option>
                </select>
            </div>

            <!-- flavor -->
            <div class="form mb-3 col-12">
                <select name="entry.2117631882" id="order_flavor" class="form-control form-select form-select-md mb-3"
                    size="" aria-label="flavor select" title="Please select the flavor" required>
                    <option selected value="">Select Flavor</option>
                    <option value="Original">Original</option>
                    <option value="Strawberry">Strawberry</option>
                    <option value="Cherry">Cherry</option>
                    <option value="Blueberry">Blueberry</option>
                </select>
            </div>

            <div class="container">
                <strong>
                    <p>If you indicated that you would like to place MULTIPLE ORDERS, please indicate the quantity,
                        size(s), and flavor(s) below: </p>

                    <p>Example:<br>
                        3 Large - 2 Strawberry, 1 Cherry<br>
                        2 Slices - 1 Blueberry and 1 Original </p>
                </strong>
            </div>
            <!-- multi order text entry -->
            <div class="form-floating mb-3 col-12">
                <input name="entry.1911536277" id="order_multi_order" type="text" class="form-control" id="inputAddress"
                    placeholder="1234 Main St, Apt 1">
                <label for="multi_order" class="form-label">
                    <label>Multiple order description</label>
                </label>
            </div>

            <!-- pick up or delivary -->
            <div class="form mb-3 col-12">
                <select name="entry.1469173899" id="order_pickup_delivery"
                    class="form-control form-select form-select-md mb-3" size="" aria-label="Pickup or Delivery" title="Please select the option"
                    required>
                    <option selected value="">Pickup or Delivery</option>
                    <option value="Pickup">Pickup - free
                        (Pickup location will be sent to you after confirmation)
                    </option>
                    <option value="Delivery">Delivery - $5 fee within Harrisonburg
                        Area</option>
                </select>
            </div>

            <div class="container">
                <p>
                    <i>I understand that delivery will cost me a $5 fee<br>
                        (separate from the cheesecake cost)</i>
                </p>
            </div>
            <!-- delivary confirmation -->
            <div class="form mb-3 col-12">
                <select name="entry.985189264" id="order_deli_confirm"
                    class="form-control form-select form-select-md mb-3" size="" aria-label="Pickup or Delivery" title="Please confirm"
                    required>
                    <option selected value="">Select One</option>
                    <option value="Agree">I understand, and I agree to this fee
                    </option>
                    <option value="NA">Not applicable ~ I chose pickup</option>
                </select>
            </div>

            <div class="container">
                <p>
                    If you indicated that you would like a delivery, please enter the <strong>address</strong> you would
                    like your
                    cheesecake delivered to:<br>

                    Example: 738 S Mason St, Harrisonburg, VA 22807
                </p>
            </div>

            <div class="form-floating mb-3 col-12">

                <input id="order_addy" type="text" class="form-control" id="inputAddress""
                    placeholder=" 123 Apple Street">
                <label for="inputAddress" class="form-label">Address</label>
            </div>

            <div class="form-floating mb-3 col-md-6">

                <input id="order_city" type="text" class="form-control" id="inputCity" placeholder="Harrisonburg">
                <label for="inputCity" class="form-label">City</label>
            </div>
            <div class="form-floating mb-3 col-md-4">

                <input id="order_state" type="text" class="form-control" id="inputCity" placeholder="VA">
                <label for="inputState" class="form-label">State</label>
            </div>
            <div class="form-floating mb-3 col-md-2">

                <input id="order_zip" type="text" class="form-control" id="inputZip" placeholder="22801">
                <label for="inputZip" class="form-label">Zip</label>
            </div>

            <!-- submit button  -->

            <div class="col-12" id="submitbox">
                <input class="btn btn-primary" id="order_submit" type="submit" name="Submit" value="Submit">
            </div>

            <div id="order_confirm_out"></div>
        </form>

    </div>

    <!-- get pull address -->

    <!-- form api script -->
    <script>

        function generateAddress() {

            const address = [document.querySelector('#order_addy').value,
            document.querySelector('#order_city').value,
            document.querySelector('#order_state').value,
            document.querySelector('#order_zip').value];
            document.getElementById('fulladdy').value = address.join(" ")
        }

        const myForm = document.getElementById('order_form_inputs');
        myForm.addEventListener('submit', function (event) {
            event.preventDefault(); // Prevent form submission (optional)
            sendDataToGoogleForm(); // Call custom function

        });
        function sendDataToGoogleForm() {

            const address = [document.querySelector('#order_addy').value,
            document.querySelector('#order_city').value,
            document.querySelector('#order_state').value,
            document.querySelector('#order_zip').value];

            //https://docs.google.com/forms/d/e/1FAIpQLSe3SOHJgvwV_ZDTEDjEHdqKPV0qpAw35PeLhVxp_g9htap_BA/viewform?usp=pp_url&entry.532714139=a&entry.260774608=a&entry.1511446537=a&entry.150430871=Slice&entry.2117631882=Original&entry.1911536277=a&entry.1469173899=Delivery&entry.985189264=Agree&entry.1122564368=a
            const settings = {
                "async": true,
                "crossDomain": true,
                "method": "POST",
                "url": "https://docs.google.com/forms/d/e/1FAIpQLSe3SOHJgvwV_ZDTEDjEHdqKPV0qpAw35PeLhVxp_g9htap_BA/formResponse",
                "headers": {
                    "content-type": "application/x-www-form-urlencoded"
                },
                "data": {
                    "entry.532714139": document.querySelector('#order_fullname').value,
                    "entry.260774608": document.querySelector('#order_phone').value,
                    "entry.1511446537": document.querySelector('#order_datetime').value,
                    "entry.150430871": document.querySelector('#order_size').value,
                    "entry.2117631882": document.querySelector('#order_flavor').value,
                    "entry.1911536277": document.querySelector('#order_multi_order').value,
                    "entry.1469173899": document.querySelector('#order_pickup_delivery').value,
                    "entry.985189264": document.querySelector('#order_deli_confirm').value,
                    "entry.1122564368": address.join(" ")

                }
            };



            console.log(settings);
            document.querySelector("#order_confirm_out").innerHTML = "Thank you for your order! We will contact you regarding payment and pickup/delivery. <br>If you would like to place another order, please refreash the page. Thank you!";
            // send data to the Google Form
            console.log("Before the ajax")
            $.ajax(settings)
            console.log("I finished the ajax")


        }

    </script>
    <!-- footer here -->

    <!-- Script to add navbar element in the HTML document -->
    <script>$(function () {
            $("#foot_bar").load("footer.html");
        })</script>
    <div id="foot_bar"></div>
    <!-- footer end -->


    <!-- animate on scroll -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"
        integrity="sha512-A7AYk1fGKX6S2SsHywmPkrnzTZHrgiVT7GcQkLGDe2ev0aWb8zejytzS8wjo7PGEXKqJOrjQ4oORtnimIRZBtw=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- our script -->
    <script src="scripts.js"></script>

    <!-- bootstrap -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>

</body>

</html>
